{"version":3,"sources":["webpack:///./src/views/main/Productsdetail.vue?f1fa","webpack:///src/views/main/Productsdetail.vue","webpack:///./src/views/main/Productsdetail.vue?17df","webpack:///./src/views/main/Productsdetail.vue","webpack:///./src/components/Eventbus.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","on","$event","staticStyle","_v","_s","products","title","style","origin_price","price","_f","class","domProps","description","backgroundImage","imageUrl","_m","content","Incart","quantityUpdata","curId","curNum","preventDefault","addtoCart","staticRenderFns","name","components","data","uuid","carts","cartsFilter","status","loadingItem","created","$route","params","id","getProducts","getCart","methods","$http","console","log","$swal","fire","icon","text","timer","num","product","quantity","patch","url","then","component","EventBus","Vue"],"mappings":"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","file":"js/chunk-3b205612.b92b6342.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-white sticky-top\"},[_c('Loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"container\"},[_c('div',{staticStyle:{\"min-height\":\"300px\",\"background-image\":\"url(https://cdn.pixabay.com/photo/2016/07/04/11/32/succulent-1496452__340.jpg)\",\"background-position\":\"50% 30%\",\"background-size\":\"cover\"}}),_c('div',{staticClass:\"row justify-content-between mt-4 mb-7\"},[_c('div',{staticClass:\"col-md-7\"},[_c('h2',{staticClass:\"mb-0\"},[_vm._v(\"產品名稱 : \"+_vm._s(_vm.products.title))]),_c('div',{staticClass:\"row justify-content-between mt-2\"},[_c('div',{staticClass:\"col-md-7 text-right\"},[_c('p',{style:(_vm.products.origin_price < _vm.products.price ?\n              'text-decoration:none;' : 'text-decoration: line-through;')},[_vm._v(\" 原價:\"+_vm._s(_vm._f(\"currency\")(_vm.products.origin_price))+\"元\")])]),_c('div',{staticClass:\"col text-left\"},[_c('p',{class:_vm.products.origin_price < _vm.products.price ?\n                '.text-dark':'text-danger',style:(_vm.products.origin_price < _vm.products.price ?\n                 '' : 'font-weight:900;')},[_vm._v(\" 特價:\"+_vm._s(_vm._f(\"currency\")(_vm.products.price))+\"元 \")])])]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.products.description)}}),_c('div',{staticClass:\"my-4\"},[_c('div',{staticClass:\"rounded-0 col-md-7\",staticStyle:{\"height\":\"500px\",\"background-size\":\"cover\",\"background-position\":\"center center\"},style:({backgroundImage: 'url(' +_vm.products.imageUrl[0] + ')' })})]),_c('div',{staticClass:\"accordion border\\n           border-bottom border-top-0\\n           border-left-0 border-right-0 mb-3\",attrs:{\"id\":\"accordionExample\"}},[_c('div',{staticClass:\"card border-0\"},[_vm._m(0),_c('div',{staticClass:\"collapse show\",attrs:{\"id\":\"collapseOne\",\"aria-labelledby\":\"headingOne\",\"data-parent\":\"#accordionExample\"}},[_c('div',{staticClass:\"card-body pb-5\",domProps:{\"innerHTML\":_vm._s(_vm.products.content)}})])])])]),_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"input-group mb-3 border mt-3\"},[_c('div',{staticClass:\"input-group-prepend\"},[_c('button',{staticClass:\"btn btn-outline-dark rounded-0 border-0 py-3 text-danger\",class:this.Incart ===true ? '':'disabled',attrs:{\"type\":\"button\",\"id\":\"button-addon1\"},on:{\"click\":function($event){return _vm.quantityUpdata(_vm.curId,_vm.curNum-1)}}},[_c('i',{staticClass:\"fas fa-minus\"})])]),_c('input',{staticClass:\"form-control border-0 text-center my-auto shadow-none\",attrs:{\"type\":\"text\",\"aria-label\":\"Example text with button addon\",\"aria-describedby\":\"button-addon1\"},domProps:{\"value\":_vm.curNum}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-dark rounded-0 border-0 py-3 text-success\",class:this.Incart ===true ? '':'disabled',attrs:{\"type\":\"button\",\"id\":\"button-addon2\"},on:{\"click\":function($event){return _vm.quantityUpdata(_vm.curId,_vm.curNum+1)}}},[_c('i',{staticClass:\"fas fa-plus\"})])])]),_c('a',{staticClass:\"btn btn-dark btn-block rounded-0 py-3 \",class:this.Incart ===true ? 'disabled':'',attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addtoCart(_vm.curId,_vm.curNum)}}},[_vm._v(\"加入購物車 \")])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-header px-0 py-4 bg-white border border-bottom-0\\n               border-top border-left-0 border-right-0\",attrs:{\"id\":\"headingOne\",\"data-toggle\":\"collapse\",\"data-target\":\"#collapseOne\"}},[_c('div',{staticClass:\"d-flex justify-content-between align-items-center pr-1\"},[_c('h4',{staticClass:\"mb-0\"},[_vm._v(\" 細節說明 \")]),_c('i',{staticClass:\"fas fa-minus\"})])])}]\n\nexport { render, staticRenderFns }","<template>\n <div class=\"bg-white sticky-top\">\n    <Loading :active.sync=\"isLoading\" />\n      <div class=\"container\">\n      <div style=\"min-height: 300px;\n      background-image: url(https://cdn.pixabay.com/photo/2016/07/04/11/32/succulent-1496452__340.jpg);\n      background-position: 50% 30%; background-size: cover; \">\n      </div>\n      <div class=\"row justify-content-between mt-4 mb-7\">\n        <div class=\"col-md-7\">\n          <h2 class=\"mb-0\">產品名稱 : {{products.title}}</h2>\n          <!-- <p class=\"font-weight-bold\">原價 {{products.origin_price}} 特價\n            {{products.price}}</p> -->\n\n          <div class=\"row justify-content-between mt-2\">\n            <div class=\"col-md-7 text-right\">\n              <p\n               :style=\"products.origin_price < products.price ?\n               'text-decoration:none;' : 'text-decoration: line-through;'\">\n               原價:{{ products.origin_price  | currency  }}元</p>\n            </div>\n\n            <div class=\"col text-left\">\n              <p :style=\"products.origin_price < products.price ?\n                  '' : 'font-weight:900;'\"\n                 :class=\"products.origin_price < products.price ?\n                 '.text-dark':'text-danger'\">\n                 特價:{{ products.price | currency}}元\n              </p>\n            </div>\n          </div>\n          <p v-html=\"products.description\"></p>\n\n          <div class=\"my-4\" >\n            <div class=\"rounded-0 col-md-7\"\n                style=\"height:500px; background-size: cover;\n                background-position: center center;\"\n                :style=\"{backgroundImage: 'url(' +products.imageUrl[0] + ')' }\">\n              </div>\n          </div>\n\n          <div class=\"accordion border\n            border-bottom border-top-0\n            border-left-0 border-right-0 mb-3\"\n            id=\"accordionExample\">\n            <div class=\"card border-0\">\n              <div class=\"card-header px-0 py-4 bg-white border border-bottom-0\n                border-top border-left-0 border-right-0\" id=\"headingOne\"\n                data-toggle=\"collapse\" data-target=\"#collapseOne\">\n                <div class=\"d-flex justify-content-between align-items-center pr-1\">\n                  <h4 class=\"mb-0\">\n                    細節說明\n                  </h4>\n                  <i class=\"fas fa-minus\"></i>\n                </div>\n              </div>\n\n              <div id=\"collapseOne\" class=\"collapse show\"\n                aria-labelledby=\"headingOne\" data-parent=\"#accordionExample\">\n                <div class=\"card-body pb-5\" v-html=\"products.content\">\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n\n        <!-- 購物車調整 -->\n        <div class=\"col-md-4\">\n          <div class=\"input-group mb-3 border mt-3\">\n            <div class=\"input-group-prepend\">\n              <button\n              class=\"btn btn-outline-dark rounded-0 border-0 py-3 text-danger\"\n              type=\"button\" id=\"button-addon1\"\n              :class = \"this.Incart ===true ? '':'disabled' \"\n              @click=\"quantityUpdata(curId,curNum-1)\"\n              >\n                <i class=\"fas fa-minus\"></i>\n              </button>\n            </div>\n\n            <input type=\"text\"\n            class=\"form-control border-0 text-center my-auto shadow-none\"\n            aria-label=\"Example text with button addon\"\n            aria-describedby=\"button-addon1\" :value=\"curNum\"\n            >\n\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-dark rounded-0 border-0 py-3 text-success\"\n              type=\"button\" id=\"button-addon2\"\n              :class = \"this.Incart ===true ? '':'disabled' \"\n              @click=\"quantityUpdata(curId,curNum+1)\"\n              >\n                <i class=\"fas fa-plus\"></i>\n              </button>\n            </div>\n          </div>\n\n          <a href=\"#\" @click.prevent=\"addtoCart(curId,curNum)\"\n            class=\"btn btn-dark btn-block rounded-0 py-3 \"\n            :class = \"this.Incart ===true ? 'disabled':'' \"\n          >加入購物車\n          </a>\n\n        </div>\n      </div>\n    </div>\n    </div>\n</template>\n\n<script>\n// eslint-disable-next-line import/extensions\nimport { EventBus } from '@/components/Eventbus.js';\n\nexport default {\n  name: 'ProductsDetail',\n  components: {\n  },\n  data() {\n    return {\n      products: [],\n      isLoading: false,\n      uuid: process.env.VUE_APP_UUID,\n      carts: {},\n      cartsFilter: {},\n      curId: '',\n      curNum: 1,\n      Incart: false,\n      status: {\n        loadingItem: '',\n      },\n    };\n  },\n  created() {\n    const { id } = this.$route.params;\n    this.curId = this.$route.params.id;\n    this.getProducts(id);\n    this.getCart(id);\n  },\n  methods: {\n    getProducts(id) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}${this.uuid}/ec/product/${id}`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.products = res.data.data;\n          this.isLoading = false;\n        })\n        .catch(() => {\n          this.$swal.fire({\n            icon: 'error',\n            title: '取得產品資訊',\n            text: '發生異常',\n          });\n          this.isLoading = false;\n        });\n    },\n\n    getCart() {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}${this.uuid}/ec/shopping`;\n      this.$http\n        .get(api)\n        .then((res) => {\n          this.carts = res.data.data;\n          this.isLoading = false;\n\n          // 成功回傳後，接續處理\n          this.cartsFilter = this.carts.filter((somegood) => somegood.product.id === this.curId);\n          const [curProductx] = this.cartsFilter;\n          this.Incart = (curProductx.quantity > 0);\n          this.curNum = curProductx.quantity;\n          EventBus.$emit('cartsQuantity', this.carts.length); // 購物車目前商品統計\n        });\n    },\n\n    quantityUpdata(id, num) {\n      // 避免商品數量低於 0 個\n      console.log(`id ${id} and num ${num}`);\n      console.log(`this.Incart ${this.Incart}`);\n\n      if (this.Incart === false) {\n        this.isLoading = false;\n        this.status.loadingItem = '';\n        this.$swal.fire({\n          icon: 'warning',\n          title: '請先點選',\n          text: '加入購物車..',\n          timer: 1500,\n        });\n        return;\n      }\n\n      if (num <= 0) return;\n      const data = {\n        product: id,\n        quantity: num,\n      };\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_APIPATH}${this.uuid}/ec/shopping`;\n\n      this.$http.patch(url, data).then(() => {\n        this.isLoading = false;\n        this.curNum = num;\n        this.getCart();\n      });\n    },\n\n    addtoCart(id, quantity = 1) {\n      this.status.loadingItem = id;\n      const cart = {\n        product: id,\n        quantity,\n      };\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}${this.uuid}/ec/shopping`;\n      this.$http\n        .post(api, cart)\n        .then(() => {\n          this.isLoading = false;\n          this.status.loadingItem = '';\n          this.$swal.fire({\n            icon: 'sucess',\n            title: '加入購物車..',\n            text: '成功',\n            timer: 1500,\n          });\n          this.getCart();\n        })\n        .catch(() => {\n          this.$swal.fire({\n            icon: 'error',\n            title: '加入購物車..',\n            text: '發生異常',\n          });\n          this.isLoading = false;\n          this.status.loadingItem = '';\n        });\n    },\n\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Productsdetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Productsdetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Productsdetail.vue?vue&type=template&id=8b7bae76&\"\nimport script from \"./Productsdetail.vue?vue&type=script&lang=js&\"\nexport * from \"./Productsdetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable import/prefer-default-export */\nimport Vue from 'vue';\n\nexport const EventBus = new Vue();\n"],"sourceRoot":""}