(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b205612"],{"1fc7":function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"bg-white sticky-top"},[i("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),i("div",{staticClass:"container"},[i("div",{staticStyle:{"min-height":"300px","background-image":"url(https://cdn.pixabay.com/photo/2016/07/04/11/32/succulent-1496452__340.jpg)","background-position":"50% 30%","background-size":"cover"}}),i("div",{staticClass:"row justify-content-between mt-4 mb-7"},[i("div",{staticClass:"col-md-7"},[i("h2",{staticClass:"mb-0"},[t._v("產品名稱 : "+t._s(t.products.title))]),i("div",{staticClass:"row justify-content-between mt-2"},[i("div",{staticClass:"col-md-7 text-right"},[i("p",{style:t.products.origin_price<t.products.price?"text-decoration:none;":"text-decoration: line-through;"},[t._v(" 原價:"+t._s(t._f("currency")(t.products.origin_price))+"元")])]),i("div",{staticClass:"col text-left"},[i("p",{class:t.products.origin_price<t.products.price?".text-dark":"text-danger",style:t.products.origin_price<t.products.price?"":"font-weight:900;"},[t._v(" 特價:"+t._s(t._f("currency")(t.products.price))+"元 ")])])]),i("p",{domProps:{innerHTML:t._s(t.products.description)}}),i("div",{staticClass:"my-4"},[i("div",{staticClass:"rounded-0 col-md-7",staticStyle:{height:"500px","background-size":"cover","background-position":"center center"},style:{backgroundImage:"url("+t.products.imageUrl[0]+")"}})]),i("div",{staticClass:"accordion border\n           border-bottom border-top-0\n           border-left-0 border-right-0 mb-3",attrs:{id:"accordionExample"}},[i("div",{staticClass:"card border-0"},[t._m(0),i("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[i("div",{staticClass:"card-body pb-5",domProps:{innerHTML:t._s(t.products.content)}})])])])]),i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"input-group mb-3 border mt-3"},[i("div",{staticClass:"input-group-prepend"},[i("button",{staticClass:"btn btn-outline-dark rounded-0 border-0 py-3 text-danger",class:!0===this.Incart?"":"disabled",attrs:{type:"button",id:"button-addon1"},on:{click:function(a){return t.quantityUpdata(t.curId,t.curNum-1)}}},[i("i",{staticClass:"fas fa-minus"})])]),i("input",{staticClass:"form-control border-0 text-center my-auto shadow-none",attrs:{type:"text","aria-label":"Example text with button addon","aria-describedby":"button-addon1"},domProps:{value:t.curNum}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-dark rounded-0 border-0 py-3 text-success",class:!0===this.Incart?"":"disabled",attrs:{type:"button",id:"button-addon2"},on:{click:function(a){return t.quantityUpdata(t.curId,t.curNum+1)}}},[i("i",{staticClass:"fas fa-plus"})])])]),i("a",{staticClass:"btn btn-dark btn-block rounded-0 py-3 ",class:!0===this.Incart?"disabled":"",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.addtoCart(t.curId,t.curNum)}}},[t._v("加入購物車 ")])])])])],1)},c=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"card-header px-0 py-4 bg-white border border-bottom-0\n               border-top border-left-0 border-right-0",attrs:{id:"headingOne","data-toggle":"collapse","data-target":"#collapseOne"}},[i("div",{staticClass:"d-flex justify-content-between align-items-center pr-1"},[i("h4",{staticClass:"mb-0"},[t._v(" 細節說明 ")]),i("i",{staticClass:"fas fa-minus"})])])}],e=(i("99af"),i("4de4"),i("3835")),r=i("495b"),n={name:"ProductsDetail",components:{},data:function(){return{products:[],isLoading:!1,uuid:"d952d084-2b40-40c3-9758-1aef7c7aa9e6",carts:{},cartsFilter:{},curId:"",curNum:1,Incart:!1,status:{loadingItem:""}}},created:function(){var t=this.$route.params.id;this.curId=this.$route.params.id,this.getProducts(t),this.getCart(t)},methods:{getProducts:function(t){var a=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/product/").concat(t);this.$http.get(i).then((function(t){a.products=t.data.data,a.isLoading=!1})).catch((function(){a.$swal.fire({icon:"error",title:"取得產品資訊",text:"發生異常"}),a.isLoading=!1}))},getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping");this.$http.get(a).then((function(a){t.carts=a.data.data,t.isLoading=!1,t.cartsFilter=t.carts.filter((function(a){return a.product.id===t.curId}));var i=Object(e["a"])(t.cartsFilter,1),s=i[0];t.Incart=s.quantity>0,t.curNum=s.quantity,r["a"].$emit("cartsQuantity",t.carts.length)}))},quantityUpdata:function(t,a){var i=this;if(console.log("id ".concat(t," and num ").concat(a)),console.log("this.Incart ".concat(this.Incart)),!1===this.Incart)return this.isLoading=!1,this.status.loadingItem="",void this.$swal.fire({icon:"warning",title:"請先點選",text:"加入購物車..",timer:1500});if(!(a<=0)){var s={product:t,quantity:a};this.isLoading=!0;var c="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping");this.$http.patch(c,s).then((function(){i.isLoading=!1,i.curNum=a,i.getCart()}))}},addtoCart:function(t){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.status.loadingItem=t;var s={product:t,quantity:i};this.isLoading=!0;var c="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping");this.$http.post(c,s).then((function(){a.isLoading=!1,a.status.loadingItem="",a.$swal.fire({icon:"sucess",title:"加入購物車..",text:"成功",timer:1500}),a.getCart()})).catch((function(){a.$swal.fire({icon:"error",title:"加入購物車..",text:"發生異常"}),a.isLoading=!1,a.status.loadingItem=""}))}}},o=n,d=i("2877"),u=Object(d["a"])(o,s,c,!1,null,null,null);a["default"]=u.exports},"495b":function(t,a,i){"use strict";i.d(a,"a",(function(){return c}));var s=i("2b0e"),c=new s["a"]}}]);
//# sourceMappingURL=chunk-3b205612.b92b6342.js.map