(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee263aa2"],{8054:function(t,o,a){"use strict";a.r(o);var i=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"container"},[a("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(o){t.isLoading=o}}}),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-6 bg-white py-5",staticStyle:{"min-height":"calc(100vh - 56px - 76px)"}},[t._m(0),t._l(t.carts,(function(o){return a("div",{key:o.id,staticClass:"d-flex mt-4 bg-light"},[a("img",{staticStyle:{width:"120px",height:"120px","object-fit":"cover"},attrs:{src:o.product.imageUrl[0],alt:"產品圖片"}}),a("div",{staticClass:"w-100 p-3 position-relative"},[a("a",{staticClass:"position-absolute",staticStyle:{top:"16px",right:"16px"},attrs:{href:"#"},on:{click:function(a){return t.removeCartItem(o.product.id)}}},[a("i",{staticClass:"fas fa-times"})]),a("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(o.product.title))]),a("p",{staticClass:"mb-1 text-muted",staticStyle:{"font-size":"14px"}},[t._v(t._s(o.product.category))]),a("div",{staticClass:"d-flex justify-content-between align-items-center w-100"},[a("div",{staticClass:"input-group w-50 align-items-center"},[a("div",{staticClass:"input-group-prepend pr-1"},[a("a",{attrs:{href:"#"},on:{click:function(a){return t.quantityUpdata(o.product.id,o.quantity-1)}}},[a("i",{staticClass:"fas fa-minus"})])]),a("input",{staticClass:"form-control border-0\n              text-center my-auto shadow-none bg-light px-0",attrs:{type:"text",placeholder:"","aria-label":"Example text\n              with button addon","aria-describedby":"button-addon1"},domProps:{value:o.quantity}}),a("div",{staticClass:"input-group-append pl-1"},[a("a",{attrs:{href:"#"},on:{click:function(a){return t.quantityUpdata(o.product.id,o.quantity+1)}}},[a("i",{staticClass:"fas fa-plus"})])])]),a("p",{staticClass:"mb-0 ml-auto"},[t._v("NT$"+t._s(o.product.price*o.quantity))])])])])})),a("div",{staticClass:"d-flex mt-4 bg-light"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(o){o.target.composing||(t.coupon_code=o.target.value)}}}),a("button",{staticClass:"btn btn-outline-secondary",class:this.cartTotal-this.coupon_discountValue<=0?"disabled":"",staticStyle:{width:"150px"},attrs:{type:"button"},on:{click:function(o){return t.addCoupon()}}},[t._v(" 套用優惠碼 ")])]),a("table",{staticClass:"table mt-4 text-muted"},[a("tbody",[a("tr",[a("th",{staticClass:"border-0 px-0 font-weight-normal",attrs:{scope:"row"}},[t._v("總價")]),a("td",{staticClass:"text-right border-0 px-0"},[t._v("NT$"+t._s(this.cartTotal))])]),this.coupon_Enable?a("tr",[a("th",{staticClass:"border-0 px-0 pt-0 font-weight-normal",attrs:{scope:"row"}},[t._v("折扣")]),a("td",{staticClass:"text-right border-0 px-0 pt-0"},[t._v(" NT$ "+t._s(this.coupon_discountValue))])]):t._e()])]),a("div",{staticClass:"d-flex justify-content-between mt-4"},[a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("應付")]),a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("NT$ "+t._s(this.cartTotal-this.coupon_discountValue))])]),a("router-link",{staticClass:"btn btn-dark btn-block mt-4 rounded-0 py-3",class:this.cartTotal-this.coupon_discountValue<=0?"disabled":"",attrs:{to:"/Checkout"}},[t._v("送出訂單 ")])],2)])],1)},e=[function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"d-flex justify-content-between"},[a("h2",{staticClass:"mt-2"},[t._v("Cart Detail")])])}],s=(a("99af"),a("4160"),a("159b"),{name:"Cart2",components:{},data:function(){return{isNew:!1,isLoading:!1,products:{},carts:{},cartTotal:0,uuid:"d952d084-2b40-40c3-9758-1aef7c7aa9e6",xerror:"NO_ERROR",tempProduct:{},coupon_Enable:!1,coupon_discountValue:0,coupon:{},coupon_code:"",coupon_log:"",status:{loadingItem:""},DeliveryInf:{name:"",email:"",tel:"",address:"",payment:"",message:""}}},created:function(){this.getCart(),this.coupon_log=JSON.parse(localStorage.getItem("rototoCoupon")),null===this.coupon_log&&(this.coupon_log=""),this.coupon_log.length>0&&(this.coupon_code=this.coupon_log,this.addCoupon())},methods:{getCart:function(){var t=this;this.isLoading=!0;var o="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping");this.$http.get(o).then((function(o){t.carts=o.data.data,t.isLoading=!1,t.cartTotal=0,t.carts.forEach((function(o){console.log(t.cartTotal),t.cartTotal+=o.product.price*o.quantity}))})).catch((function(o){t.$swal.fire({icon:"error",title:"取得購物車內容失敗...",text:"錯誤代碼".concat(o.request.status)}),t.isLoading=!1}))},addCoupon:function(){var t=this;this.isLoading=!0;var o="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/coupon/search");this.$http.post(o,{code:this.coupon_code}).then((function(o){t.isLoading=!1,t.coupon=o.data.data,t.coupon_Enable=!0,t.coupon_log=t.coupon_code,localStorage.setItem("rototoCoupon",JSON.stringify(t.coupon_log)),t.coupon_discountValue=t.cartTotal*(t.coupon.percent/100),t.$swal.fire({icon:"sucess",title:"使用優惠券",text:"成功",timer:1500})})).catch((function(o){t.$swal.fire({icon:"error",title:"使用優惠券失敗...",text:"錯誤代碼".concat(o.request.status)}),t.coupon_Enable=!1,t.coupon_discountValue=0,t.coupon_log="",localStorage.setItem("rototoCoupon",JSON.stringify(t.coupon_log)),t.isLoading=!1}))},quantityUpdata:function(t,o){var a=this;if(console.log("id ".concat(t," and num ").concat(o)),!(o<=0)){var i={product:t,quantity:o};this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping");this.$http.patch(e,i).then((function(){a.isLoading=!1,a.curNum=o,a.getCart()}))}},removeCartItem:function(t){var o=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat(this.uuid,"/ec/shopping/").concat(t);this.$http.delete(a).then((function(){o.isLoading=!1,o.$swal.fire({icon:"sucess",title:"購物車商品移除..",text:"成功",timer:1500}),o.getCart()})).catch((function(t){o.$swal.fire({icon:"error",title:"購物車商品移除失敗...",text:"錯誤代碼".concat(t.request.status)}),o.isLoading=!1}))}}}),n=s,c=a("2877"),r=Object(c["a"])(n,i,e,!1,null,null,null);o["default"]=r.exports},8418:function(t,o,a){"use strict";var i=a("c04e"),e=a("9bf2"),s=a("5c6c");t.exports=function(t,o,a){var n=i(o);n in t?e.f(t,n,s(0,a)):t[n]=a}},"99af":function(t,o,a){"use strict";var i=a("23e7"),e=a("d039"),s=a("e8b5"),n=a("861d"),c=a("7b0b"),r=a("50c4"),u=a("8418"),l=a("65f0"),p=a("1dde"),d=a("b622"),h=a("2d00"),f=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!e((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=p("concat"),_=function(t){if(!n(t))return!1;var o=t[f];return void 0!==o?!!o:s(t)},C=!v||!b;i({target:"Array",proto:!0,forced:C},{concat:function(t){var o,a,i,e,s,n=c(this),p=l(n,0),d=0;for(o=-1,i=arguments.length;o<i;o++)if(s=-1===o?n:arguments[o],_(s)){if(e=r(s.length),d+e>g)throw TypeError(m);for(a=0;a<e;a++,d++)a in s&&u(p,d,s[a])}else{if(d>=g)throw TypeError(m);u(p,d++,s)}return p.length=d,p}})}}]);
//# sourceMappingURL=chunk-ee263aa2.8e5e679c.js.map